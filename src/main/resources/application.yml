spring:
  application:
    name: api

  datasource:
    # ✅ RDS/MySQL 접속 정보 (실 서버용은 절대 깃헙에 비밀번호 올리지 말 것)
    url: jdbc:mysql://YOUR-RDS-ENDPOINT:3306/YOUR_DB_NAME   # 예: awseb-xxxx.rds.amazonaws.com:3306/testdb
    username: YOUR_DB_USERNAME                              # 예: ebroot
    password: YOUR_DB_PASSWORD                              # 예: 실제 비밀번호 (깃헙에는 쓰지 말기)
    driver-class-name: com.mysql.cj.jdbc.Driver

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  jpa:
    hibernate:
      ddl-auto: validate    # create / update / validate 등 환경에 맞게 변경
    show-sql: false
    properties:
      hibernate:
        format_sql: true

  mail:
    # ✅ 메일 발송용 SMTP 계정 (Gmail 기준)
    host: smtp.gmail.com
    port: 587
    username: YOUR_GMAIL_ADDRESS            # 예: dodojun0913@gmail.com
    password: YOUR_APP_PASSWORD             # 예: 앱 비밀번호 (깃헙에는 절대 올리지 말 것)
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

  cloud:
    aws:
      s3:
        bucket: YOUR_S3_BUCKET_NAME         # 예: elasticbeanstalk-ap-northeast-2-xxxxxxxxxxxx
      region:
        static: ap-northeast-2
      stack:
        auto: false

server:
  port: 5000
  error:
    include-message: always          # 기본 에러 바디에 message 포함
    include-binding-errors: always
    include-stacktrace: never

# 리버스 프록시(ELB/ALB) 뒤에 있을 때 원본 IP/스킴 처리
server.forward-headers-strategy: framework

file:
  upload:
    # ✅ 로컬(Windows/Mac) 기본 저장 경로: 사용자 홈 밑에 생성
    support-dir: "${user.home}/jikimi_uploads/support"
    # 정적 노출 URL prefix (WebConfig에서 사용)
    public-url-prefix: "/files/"

logging:
  level:
    root: INFO
    org.hibernate.type.descriptor.sql: TRACE
    # Hibernate (DEBUG로 변경하여 바인딩 값 확인 준비)
    org.hibernate.SQL: WARN
    org.hibernate.orm.jdbc.bind: DEBUG   # 바인딩 값 로그 ON

    # Spring Security & Web (DEBUG로 변경하여 상세 흐름 확인)
    org.springframework.security: DEBUG  # Security 상세 로그 ON
    org.springframework.security.web: DEBUG
    org.springframework.web: INFO
    org.springframework.web.servlet.DispatcherServlet: INFO

    # 메시지 컨버터/HTTP 로깅
    org.springframework.http.converter: WARN
    org.springframework.web.reactive.function.client: INFO
    org.springframework.web.HttpLogging: WARN
    reactor.netty: WARN

    # 당신의 앱 패키지 (서비스/컨트롤러 로직 확인용)
    code.project: DEBUG

# 아래 주석은 "로그 더 보고 싶을 때" 교체용 설명으로만 남겨두면 됨
#logging.level:
#  org.hibernate.SQL: debug
#  org.hibernate.orm.jdbc.bind: trace
#  org.springframework.security.web: trace
#  org.springframework.web: debug
#  org.springframework.http.converter: trace
#  # 콘솔 로그를 자세히 보고 싶으면 위 설정을 위쪽 logging.level과 바꿔치기 하면 됩니다.

kakao:
  api:
    # ✅ 카카오 REST API Key (깃헙에는 실제 키 넣지 말고 예시/플레이스홀더만)
    key: YOUR_KAKAO_REST_API_KEY          # 예: 7bf1... 처럼 생긴 값
  # 배포 환경의 실제 리다이렉트 URI (원하면 예시로 놔둬도 됨)
  redirect-uri: "https://YOUR-CLOUDFRONT-DOMAIN/user/kakao"
  # 예: "https://d3s30j0qk5vpe1.cloudfront.net/user/kakao"

app:
  hira: # 병원 오픈 API
    base-url: "https://apis.data.go.kr/B552657/HsptlAsembySearchService"
    service-key: "YOUR_HIRA_SERVICE_KEY"     # ✅ 공공데이터포털 서비스 키 (실제 값은 숨길 것)
    timeout-sec: 5

  pharm: # 약국 오픈 API
    base-url: "https://safemap.go.kr/openApiService/data"
    list-path: "/getPharmacyData.do"
    service-key: "YOUR_PHARM_SERVICE_KEY"    # ✅ 약국 API 서비스 키
    timeout-sec: 5
